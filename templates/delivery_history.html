{% include '_page_start.html' %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
      {% for message in messages %}
        <li><span>{{ message }}</span><button class="flash-close" type="button" aria-label="Close">&times;</button></li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% include '_employee_header.html' %}

<h1>Delivery History</h1>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Delivery ID</th>
      <th>Distributor</th>
      <th>Date</th>
      <th>Total Price</th>
      <th>Total Delivery Cost</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for delivery in deliveries %}
    <tr>
      <td>{{ delivery.id }}</td>
      <td>{{ delivery.distributor }}</td>
      <td>{{ delivery.date }}</td>
      <td>{{ "{:,.2f} lei".format(delivery.total_price) }}</td>
      <td>{{ "{:,.2f} lei".format(delivery.total_cost) }}</td>
      <td>
        <a href="/delivery-details/{{ delivery.id }}">Details</a>
        <form action="/delete-delivery/{{ delivery.id }}" method="POST" style="display:inline;" onsubmit="return confirm('Delete this delivery?');">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<br>
<a href="/create-delivery">Create Delivery</a>

{% include '_page_end.html' %}


