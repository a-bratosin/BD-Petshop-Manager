{% include '_page_start.html' %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
      {% for message in messages %}
        <li><span>{{ message }}</span><button class="flash-close" type="button" aria-label="Close">&times;</button></li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% include '_employee_header.html' %}

<h1>Order History</h1>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Order ID</th>
      <th>Customer Name</th>
      <th>Customer Email</th>
      <th>Total Price</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
    <tr>
      <td>{{ order.id }}</td>
      <td>{{ order.customer_name }}</td>
      <td>{{ order.email }}</td>
      <td>{{ "{:,.2f} lei".format(order.total_price) }}</td>
      <td>
        <a href="/order-details/{{ order.id }}">Details</a>
        <form action="/delete-order/{{ order.id }}" method="POST" style="display:inline;" onsubmit="return confirm('Delete this order?');">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<br>
<a href="/create-order">Create Order</a>

{% include '_page_end.html' %}


